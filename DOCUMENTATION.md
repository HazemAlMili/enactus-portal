# Enactus Portal - Technical Documentation

## 1. Project Overview
The **Enactus Portal** is a centralized web application designed to manage the operations of an Enactus student chapter. It facilitates user management, hours tracking, task assignment, and performance monitoring through a gamified interface.

## 2. Architecture & Tech Stack
The application follows a **Client-Server** architecture:

### 2.1 Backend (Server)
- **Framework**: Express.js with TypeScript
- **Database**: MongoDB (via Mongoose ODM)
- **Authentication**: JWT (JSON Web Tokens)
- **Port**: 5000 (Default)
- **Key Dependencies**: `express`, `mongoose`, `jsonwebtoken`, `bcryptjs`, `cors`, `dotenv`

### 2.2 Frontend (Client)
- **Framework**: Next.js 16 (App Router)
- **Language**: TypeScript
- **UI Library**: ShadcnUI (based on Radix UI)
- **Styling**: TailwindCSS (Custom "Game" Theme)
- **Port**: 3000-3011 (Dynamic)
- **Key Dependencies**: `axios`, `lucide-react`, `tailwind-merge`

## 3. Installation & Setup

### Prerequisites
- Node.js (v18+)
- MongoDB (Running locally or hosted)

### Steps
1. **Clone/Navigate to Project**: `d:\E-Portal`
2. **Server Setup**:
   ```bash
   cd server
   npm install
   # Create .env file with:
   # MONGO_URI=mongodb://localhost:27017/enactus_portal
   # JWT_SECRET=your_secret_key
   npm run build
   npm start
   ```
3. **Client Setup**:
   ```bash
   cd client
   npm install
   npm run dev
   ```

## 4. Project Structure

### Server (`/server`)
- `src/controllers`: Logic for request handling (Auth, Hours, Tasks, Users).
- `src/models`: Mongoose schemas (User, Task, HourLog).
- `src/routes`: API route definitions.
- `src/middleware`: JWT authentication and RBAC middleware.
- `src/seed.ts`: Script to populate initial database data.

### Client (`/client`)
- `src/app`: Next.js App Router pages.
  - `(auth)`: Login page (Root).
  - `dashboard`: Protected dashboard routes.
- `src/components`: Reusable UI components.
  - `ui`: ShadcnUI primitive components.
  - `layout`: Sidebar and wrappers.
- `src/lib`: Utility functions and configuration.

## 5. Features & Logic

### 5.1 User Roles & Permissions
| Role | capabilities |
|------|--------------|
| **General President (GP)** | Full access. Manage users (recruit/fire), view all data. |
| **HR** | Full access to User Management. Can recruit/fire. View all data. |
| **Department Head** | Manage own department. Approve hours/tasks. View dept stats. |
| **Vice Head** | Similar to Head but cannot remove members (logic implemented in permission checks). |
| **Member** | View own stats. Submit hours. View/Complete assigned tasks. |

### 5.2 Hours System
- **Submission**: Members submit `amount` and `description`. Status defaults to 'Pending'.
- **Approval**: Heads/HR see 'Pending' hours. Clicking 'Approve' converts them to 'Approved', adds to `user.hoursApproved`, and awards `10 * hours` XP points.

### 5.3 Task Management
- **Assignment**: Leads assign tasks with a title, description, and XP score.
- **Workflow**: 
  1. Lead creates Task -> Status: 'Pending'
  2. Member views Task -> Clicks 'Mark as Done' -> Status: 'Submitted'
  3. Lead reviews -> Clicks 'Approve Completion' -> Status: 'Completed'

### 5.4 Leaderboard
- Displays all users sorted by **XP Points**.
- Top 3 highlighted with Gold/Silver/Bronze indicators.

## 6. API Endpoints

### Auth (`/api/auth`)
- `POST /login`: Authenticate user, returns JWT.
- `GET /me`: Get current user details.

### Users (`/api/users`)
- `GET /`: List all users (HR/GP only).
- `POST /`: Create new user (HR/GP only).
- `DELETE /:id`: Delete user (HR/GP only).
- `GET /leaderboard`: Public leaderboard data.

### Hours (`/api/hours`)
- `POST /`: Submit new hour log.
- `GET /`: Get hour logs (Filtered by role).
- `PUT /:id`: Update status (Approve).

### Tasks (`/api/tasks`)
- `POST /`: Create task.
- `GET /`: Get tasks (Filtered by role).
- `PUT /:id`: Update task status.

## 7. Database Information
- **Database Name**: `enactus_portal`
- **Collections**: `users`, `tasks`, `hourlogs`

## 8. Styling Theme
- **Primary**: Deep Purple (#471396)
- **Background**: Dark Navy (#090040)
- **Accent**: Bright Purple (#B13BFF)
- **Secondary**: Gold/Yellow (#FFBF10)
- **Font**: Inter (Google Fonts)

---
*Generated by Antigravity Agent*
